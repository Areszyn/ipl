<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IPL Live Stream</title>
  <script src="https://content.jwplatform.com/libraries/KB5zFt7A.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #000;
      font-family: Arial, sans-serif;
      color: white;
    }
    
    #player {
      width: 100vw;
      height: 100vh;
    }
    
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      z-index: 100;
    }
    
    .message-box {
      background: #222;
      padding: 30px;
      border-radius: 10px;
      max-width: 500px;
      width: 90%;
    }
    
    h1 {
      font-size: 24px;
      margin-bottom: 15px;
      color: #0088cc;
    }
    
    .features {
      text-align: left;
      margin: 20px 0;
    }
    
    .feature {
      margin-bottom: 10px;
      display: flex;
      align-items: center;
    }
    
    .feature i {
      margin-right: 10px;
      color: #4CAF50;
    }
    
    .buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    
    button {
      padding: 12px 20px;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
      flex: 1;
    }
    
    .join-btn {
      background: #0088cc;
      color: white;
    }
    
    .later-btn {
      background: #333;
      color: white;
    }
    
    .note {
      margin-top: 20px;
      font-size: 14px;
      color: #aaa;
    }
  </style>
</head>

<body>
<div id="player"></div>

<div class="overlay" id="joinOverlay">
  <div class="message-box">
    <h1>Join Our Channel to Watch</h1>
    <p>Access live IPL streaming by joining our Telegram channel</p>
    
    <div class="features">
      <div class="feature">
        <i class="fas fa-check"></i>
        <span>HD Quality Stream</span>
      </div>
      <div class="feature">
        <i class="fas fa-check"></i>
        <span>Live Match Updates</span>
      </div>
      <div class="feature">
        <i class="fas fa-check"></i>
        <span>Instant Notifications</span>
      </div>
    </div>
    
    <div class="buttons">
      <button class="join-btn" id="joinBtn">Join Channel</button>
      <button class="later-btn" id="laterBtn">Join Later</button>
    </div>
    
    <p class="note">You must join to continue watching</p>
  </div>
</div>

<script>
  // Check if in Telegram Mini App
  function isTelegramApp() {
    return window.Telegram?.WebApp?.initData || 
           navigator.userAgent.includes("Telegram");
  }

  // Initialize the app
  function init() {
    if (!isTelegramApp()) {
      alert("Please open in Telegram to watch");
      return;
    }
    
    const player = jwplayer("player").setup({
      file: "https://m3u8x2.cloudycx.net/media/hls/files/index.m3u8",
      width: "100%",
      height: "100%",
      autostart: false
    });
    
    // Join Channel button
    document.getElementById("joinBtn").addEventListener("click", () => {
      Telegram.WebApp.openTelegramLink("https://t.me/neprosz");
      localStorage.setItem("hasJoined", "true");
      document.getElementById("joinOverlay").style.display = "none";
      player.play();
    });
    
    // Join Later button
    document.getElementById("laterBtn").addEventListener("click", () => {
      alert("You'll need to join for full access. Playing for now...");
      document.getElementById("joinOverlay").style.display = "none";
      player.play();
    });
    
    // Check if already joined
    if (localStorage.getItem("hasJoined")) {
      document.getElementById("joinOverlay").style.display = "none";
      player.play();
    }
  }

  // Start when page loads
  window.addEventListener("DOMContentLoaded", init);
</script>

</body>
</html>
